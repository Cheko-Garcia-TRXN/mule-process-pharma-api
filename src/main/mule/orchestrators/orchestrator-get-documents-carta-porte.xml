<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="orchestrator-get-documents-carta-porte-main" doc:id="75f7810a-d85a-47be-a385-2875411f3c86" >
		<flow-ref doc:name="orchestrator-get-documents-carta-porte-prepare-request" doc:id="30201b78-e558-434b-b902-9b459cad9644" name="orchestrator-get-documents-carta-porte-prepare-request"/>
		<flow-ref doc:name="client-s3-log-call-fwk-get-documents" doc:id="32f07f61-d530-4bad-a2a1-71208add1ecb" name="client-s3-log-call-fwk-get-documents"/>
		<ee:transform doc:name="Transform Message" doc:id="aa1cd3cb-98fa-4fec-8e97-1f80e230558e" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<logger level="INFO" doc:name="Logger" doc:id="01cbf402-b2da-4fdb-a92e-654cdd542004" message="#[payload]"/>
	</sub-flow>
	<sub-flow name="orchestrator-get-documents-carta-porte-prepare-request" doc:id="c9644b24-733b-4bf7-8333-27d06085c1f0" >
		<ee:transform doc:name="Transform Message" doc:id="f4d32b24-709c-492c-abbf-e7be0cf8459a" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/java
---
{
    "s3":"txp.integraciones.cartaporte.documents",
    "key": "api=medistik" ++ (vars.date default "") ++ vars.identifier
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</sub-flow>
</mule>
